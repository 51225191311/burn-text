<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <!-- é€‚é…æ‰‹æœºå±å¹•ï¼Œè®©ç½‘é¡µåœ¨æ‰‹æœºä¸Šä¸ç¼©æ”¾ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜…åå³ç„š - å®‰å…¨ä¼ è¾“</title>
    <style>
        /* --- ç®€å•çš„è£…ä¿®æ ·å¼ --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f4f4f9;
            text-align: center;
        }
        /* æ–‡æœ¬å¤§æ¡†æ ·å¼ */
        textarea {
            width: 100%;
            height: 150px;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
            box-sizing: border-box; /* è®©paddingä¸æ’‘å¤§ç›’å­ */
        }
        /* æ–°å¢ï¼šå¯†ç æ¡†æ ·å¼ */
        .password-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
            box-sizing: border-box;
        }
        /* æŒ‰é’®æ ·å¼ */
        button {
            padding: 12px 30px;
            background-color: #ff4757;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 18px;
            border-radius: 30px;
            transition: background 0.3s;
        }
        button:hover {
            background-color: #ff6b81;
        }
        /* ç»“æœæ˜¾ç¤ºåŒºåŸŸ */
        #result {
            margin-top: 25px;
            padding: 15px;
            background: #eccc68;
            color: #2f3542;
            display: none;
            border-radius: 8px;
            word-break: break-all;
        }
        a { color: #2f3542; font-weight: bold; }
    </style>
</head>
<body>

<h1>ğŸ”¥ é˜…åå³ç„š ğŸ”¥</h1>
<p style="color: #777;">æ•°æ®ä¸€æ—¦è¢«é˜…è¯»ï¼Œç«‹å³ç‰©ç†é”€æ¯ã€‚</p>

<!-- 1. ç§˜å¯†å†…å®¹è¾“å…¥æ¡† -->
<textarea id="secretInput" placeholder="åœ¨æ­¤è¾“å…¥ç§˜å¯†å†…å®¹..."></textarea>

<!-- 2. æ–°å¢ï¼šå¯†ç è¾“å…¥æ¡† (type="password" ä¼šæ˜¾ç¤ºæ˜Ÿå·) -->
<!-- placeholder æ˜¯ç°è‰²çš„æç¤ºå­— -->
<input type="password" id="passwordInput" class="password-input" placeholder="è®¾ç½®è®¿é—®å¯†ç ï¼ˆå¯é€‰ï¼Œé˜²è¯¯è§¦ï¼‰">

<br>
<!-- 3. æŒ‰é’® -->
<button onclick="sendSecret()">ç”ŸæˆåŠ å¯†é“¾æ¥</button>

<!-- 4. ç»“æœå±•ç¤ºåŒº -->
<div id="result"></div>

<script>
    async function sendSecret() {
        // --- A. æœé›†æ•°æ® ---
        const text = document.getElementById("secretInput").value;
        const password = document.getElementById("passwordInput").value; // è·å–å¯†ç 

        if (!text) {
            alert("å†™ç‚¹ä¸œè¥¿å†ç”Ÿæˆå˜›ï¼");
            return;
        }

        // --- B. æ‰“åŒ…å‘é€ ---
        try {
            // å‘ Go åç«¯å‘èµ· POST è¯·æ±‚
            const response = await fetch("/api/burn", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                // æŠŠå†…å®¹å’Œå¯†ç æ‰“åŒ…æˆ JSON å­—ç¬¦ä¸²
                // å¦‚æœæ²¡å¡«å¯†ç ï¼Œpassword å°±æ˜¯ç©ºå­—ç¬¦ä¸² ""ï¼Œåç«¯ä¼šå¤„ç†çš„
                body: JSON.stringify({
                    text: text,
                    password: password
                })
            });

            const data = await response.json();

            // --- C. å¤„ç†ç»“æœ ---
            if (response.ok) {
                // æˆåŠŸï¼šæ˜¾ç¤ºé“¾æ¥
                const resultDiv = document.getElementById("result");
                resultDiv.style.display = "block";
                resultDiv.innerHTML = `
                        <p>ğŸ”— ä½ çš„ç§˜å¯†é“¾æ¥ï¼š</p>
                        <a href="${data.url}" target="_blank">${data.url}</a>
                        <p style="font-size:12px; margin-top:10px;">(ç‚¹å‡»é“¾æ¥å³å¯æŸ¥çœ‹ï¼Œé˜…åå³ç„š)</p>
                    `;
            } else {
                // å¤±è´¥ï¼šå¼¹çª—æŠ¥é”™
                alert("å‡ºé”™äº†: " + data.error);
            }
        } catch (error) {
            console.error("Error:", error);
            alert("ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨");
        }
    }
</script>
</body>
</html>